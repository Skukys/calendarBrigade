(()=>{"use strict";const e=[{date:"2",task:6,brigades:[{img:"truck.png",count:4,color:"da6666",name:"Бригада 1",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]},{img:"safety-hat.png",count:2,color:"65c565",name:"Бригада 2",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]}]},{date:"15",task:2,brigades:[{img:"truck.png",count:4,color:"da6666",name:"Бригада 1",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]},{img:"safety-hat.png",count:2,color:"65c565",name:"Бригада 2",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]}]},{date:"22",task:2,brigades:[{img:"truck.png",count:4,color:"da6666",name:"Бригада 1",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]},{img:"safety-hat.png",count:2,color:"65c565",name:"Бригада 2",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]}]},{date:"24",task:2,brigades:[{img:"truck.png",count:4,color:"da6666",name:"Бригада 1",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]},{img:"safety-hat.png",count:2,color:"65c565",name:"Бригада 2",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]}]},{date:"27",task:4,brigades:[{img:"truck.png",count:4,color:"da6666",name:"Бригада 1",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]},{img:"safety-hat.png",count:2,color:"65c565",name:"Бригада 2",workers:[{name:"Работник 1"},{name:"Работник 2"},{name:"Работник 3"},{name:"Работник 4"}],tasks:[{name:"Задание 1",status:"open"},{name:"Задание 2",status:"open"},{name:"Задание 3",status:"open"}]}]}],a=[[{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1}],[{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1}],[{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1}],[{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1}],[{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1},{date:"",active:!1}]];function t(t){let n=function(e){a.forEach(((e,t)=>{e.forEach(((e,n)=>a[t][n]={date:"",active:!1}))}));let t=new Date(e),n=new Date(t.getFullYear(),t.getMonth()+1,0),s=new Date,i=1,d=!1;for(let e=0;e<35;e++){let c=Math.floor(e/7),r=e-7*c;t.setDate(i),t.getDay()!==e+1&&0!==t.getDay()||d||(d=!0,a[c][r].date=t.getDate().toString()),d&&t>=s&&(a[c][r].active=!0),i<=n.getDate()&&d&&(a[c][r].date=t.getDate().toString()),d&&i++}return a}(t);return e.forEach(((e,t)=>{a.forEach(((a,t)=>{let s=a.findIndex((a=>a.date===e.date));-1!==s&&(n[t][s].info=e,n[t][s].active=!0)}))})),n}let n,s=document.querySelector(".calendar__dates"),i=document.querySelector(".brigade-list"),d=document.querySelector(".tasks__list");function c(e){s.innerHTML="",e.forEach(((e,a)=>{let t=document.createElement("div");t.classList.add("calendar__dates-row"),t.classList.add("flex"),e.forEach(((e,n)=>{let s=document.createElement("div");if(s.classList.add("dates-row__item"),e.active?s.classList.add("active"):s.classList.add("disabled"),s.setAttribute("data-week",a),s.setAttribute("data-day",n),s.insertAdjacentHTML("beforeend",`<div class="dates-row__item-block">${e.date}</div>`),e.info?.task&&e.active){let a=`\n            <div class="dates-row__item-count flex center">\n                <img src="src/img/check.png" alt="check image">\n                <span>${e.info?.task}</span>\n            </div>\n            `;s.insertAdjacentHTML("beforeend",a)}if(e.info?.brigades&&e.info?.brigades.length>0&&e.active){let a=document.createElement("div");a.classList.add("dates-row__item-brigades"),a.innerHTML+=`\n                    <div class="dates-row__item-brigades__item" style="background:#65c565">\n                        <img src="src/img/safety-hat.png" alt="image brigade">\n                        <span>${e.info?.brigades.length}</span>\n                    </div>\n                    `,s.insertAdjacentElement("beforeend",a)}t.insertAdjacentElement("beforeend",s)})),s.insertAdjacentElement("beforeend",t)})),(e=>{document.querySelectorAll(".dates-row__item.active").forEach((a=>{a.addEventListener("click",(()=>{let t=a.getAttribute("data-week"),s=a.getAttribute("data-day");n=e[+t][+s],i.innerHTML="",d.innerHTML="",n.info?.brigades&&n.info?.brigades.forEach(((e,a)=>{i.innerHTML+=`\n                        <div class="brigade-list__item brigade-head" data-id="${a}">\n                            <img src="src/img/${e.img}" alt="truck" style="background: #${e.color}" class="brigade-head__icon">\n                            <div class="brigade-head__name">${e.name}</div>\n                            <div class="brigade-head__task">${e.count}</div>\n                        </div>\n                `,e.workers.forEach((e=>{i.innerHTML+=`\n                        <div class="brigade-list__item">\n                            <img src="src/img/builder.png" alt="builder" class="brigade-list__item-img">\n                            <div class="brigade-list__item-text">${e.name}</div>\n                        </div>\n                `}))})),document.querySelectorAll(".brigade-head").forEach((e=>{e.addEventListener("click",(()=>{let a=e.getAttribute("data-id"),t=n.info?.brigades[+a];d.innerHTML=`\n            <div class="tasks__header flex">\n                <img src="src/img/${t.img}" class="tasks__header-icon" style="background: #${t.color}" alt="brigade icon">\n                <p>${t.name}</p>\n            </div>\n            `,t.tasks.forEach((e=>{d.innerHTML+=`\n                <div class="tasks__list-item">\n                    ${e.name}\n                </div>\n                `}))}))}))}))}))})(e)}let r=document.querySelector(".calendar__days"),o=document.querySelector(".calendar__change-month"),m=document.querySelector(".calendar__change-arrow.right"),l=document.querySelector(".calendar__change-arrow.left"),g=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];["Пн","Вт","Ср","Чт","Пт","Сб","Вс"].forEach((e=>r.innerHTML+=`<div class="calendar__days-item">${e}</div>`));let u=new Date,v=()=>{o.innerHTML=g[u.getMonth()]+" "+u.getFullYear()};v(),m.addEventListener("click",(()=>{u=11!==u.getMonth()?new Date(u.getFullYear(),u.getMonth()+1,1):new Date(u.getFullYear()+1,0,1),v(),c(t(u.getTime()))})),l.addEventListener("click",(()=>{u=0!==u.getMonth()?new Date(u.getFullYear(),u.getMonth()-1,1):new Date(u.getFullYear()-1,11,1),v(),c(t(u.getTime()))})),c(t(u.getTime()))})();